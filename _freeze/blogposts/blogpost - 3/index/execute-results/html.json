{
  "hash": "6f64a80c9afc4e9b89b69a08f7b97910",
  "result": {
    "markdown": "---\ntitle: \"Blog Post 3: Assignment 5\"\nsubtitle: \"Different kinds of combine, grep and 4 verb for the pipe operator\"\nauthor: \"Bel Khuu\"\ndate: \"2022-10-24\"\ncategories: [Code, R, Plots, Blog, Hackathon]\nimage: \"plot.jpg\"\ndraft: false\nformat:\n  html:\n    code-fold: true\n    code-tools: true\n    code-copy: true\nexecute:\n  echo: false\n---\n\n\nOur team has decided to get a head start for the next week's assignment. [UTD Grades](utdgrades.com) is a great website to find grades distribution for the classes offered at UTD during previous semesters. All of their raw data is posted on their github account!\n\nLet's start with what I have learned or re-learned for the data cleaning process.\n\n## 1. Different kinds of combine\n\n### a. rbind: Combine using same columns\n\n\n::: {.cell}\n\n:::\n\n\n``` yaml\nspgrades <- data.frame(read.csv(\"Spring2022grades.csv\"))\nfagrades <- data.frame(read.csv(\"Fall2021grades.csv\"))\n\ngrades <- rbind(fagrades, spgrades)\n```\n\n### b. paste: Combine values in two columns (concatenating)\n\nHere, I wanted just one Course column that has the subject and the catalog number.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n  Subject Catalog.Number\n1    ACCT           2301\n2    ACCT           2301\n3    ACCT           2301\n4    ACCT           2301\n5    ACCT           2301\n6    ACCT           2301\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n     Course\n1 ACCT 2301\n2 ACCT 2301\n3 ACCT 2301\n4 ACCT 2301\n5 ACCT 2301\n6 ACCT 2301\n```\n:::\n:::\n\n\n``` yaml\ngrades$Course <- paste(grades$Subject, grades$Catalog.Number)\n```\n\n### c. merge: Combine using same rows\n\nHere, I tried to create percentage for all the grades. So, I created a copy of the grades dataframe that only contains grades. I copied over the Course column for the course names, then used merge to combine both dataframes.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n  Section A..x A.x A..1.x B..x B.x\n1     001   12   4      7    4   3\n2     001   12   4      7    4   3\n3     001   12   4      7    4   3\n4     001   12   4      7    4   3\n5     001   12   4      7    4   3\n6     001   12   4      7    4   3\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n          A.          A       A..1         B.          B\n1 0.22641509 0.07547170 0.13207547 0.07547170 0.05660377\n2 0.20312500 0.14062500 0.09375000 0.07812500 0.09375000\n3 0.13846154 0.10769231         NA 0.12307692 0.09230769\n4         NA 0.27692308         NA 0.03076923 0.04615385\n5 0.18840580 0.11594203 0.04347826 0.07246377 0.01449275\n6 0.09230769 0.07692308 0.07692308 0.12307692 0.06153846\n```\n:::\n:::\n\n\n``` yaml\npct <- grades[4:21]/rowSums(grades[4:21], na.rm=TRUE)*ifelse(rowSums(\nis.na(grades[4:21])) == ncol(grades[4:21]), NA, 1)\npct$Course <- grades$Course\ngrades <- merge(grades,pct, by=\"Course\")\n\nhead(grades[4:9])\nhead(pct[1:5])\n```\n\n## 2. Revisiting Grep\n\nGrep is great when you are working with a large dataset and want to pull just the variables or column names that contains a certain string. In my case, I want to remove all the instructor columns. Could I have just selected the column numbers and remove them from my dataframe since they are right next to each other, yes!\n\nLet's just say that knowing/remembering how to do this will benefit me in long run. I learned this in Professor Dong Li's Select Topics in Economics.\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Instructor.1\" \"Instructor.2\" \"Instructor.3\" \"Instructor.4\" \"Instructor.5\"\n[6] \"Instructor.6\"\n```\n:::\n:::\n\n\n``` yaml\ninstructor <- grep(\"Instructor\", colnames(grades), value = TRUE)\n```\n\nHere is another example with grep. I wanted to find all the course that has EPPS in its name. All of those courses will eppsclass. EPPS will be the new dataframe created from the grades dataframe with only EPPS courses (using eppsclass present in Course).\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n         Course Subject Catalog.Number Section A..x\n41078 EPPS 1110    EPPS           1110     003   NA\n41079 EPPS 1110    EPPS           1110     003   NA\n41080 EPPS 1110    EPPS           1110     003   NA\n41081 EPPS 1110    EPPS           1110     002   NA\n41082 EPPS 1110    EPPS           1110     002   NA\n41083 EPPS 1110    EPPS           1110     002   NA\n```\n:::\n:::\n\n\n``` yaml\neppsclass <- grep(\"EPPS\", grades$Course, value = TRUE)\nEPPS <- grades%>%\n  subset(Course %in% eppsclass)\nhead(EPPS[1:5])\n```\n\n## 3. Revisiting the 4 verbs in pipe operator\n\nI have created a cheat sheet for R while working on my projects. Professor Li often refer to these as the 4 verbs when using the pipe operator %\\>%. I don't know when but I have added a fifth one to my list.\n\n-   Filter: pick rows you want to keep\n\n-   Select: pick columns you want to keep\n\n-   Mutate: create new variable with new conditions\n\n-   Summarize: summarize with new variables\n\n-   Arrange: to sort in order\n\nBelow is what the 4 verbs part of my cheat sheet script looks like.\n\n``` yaml\n#4 VERBS\n\n######### \n\n# Filter function works on rows.\n# Select function will pick the column to keep.\n# Mutate can create new variables\n# Summary to summarize\n# Arrange to sort in order\n\n##filter\ntxhousing <- txhousing%>%\n  filter(city=='Dallas'|city=='Houston'|city=='Austin', month==1)\n\nlabor_high <- filter(labor, payment>750, gender==\"F\")\n\n##select\nlabor_select <- select(labor, hours, gender)\nlabor_select2 <- labor %>%\n  select(hours, gender)\n\n## mutate \nlabor_mutate2 <- labor %>%\n  mutate(wage = payment/hours)\n\n##summarize\nlabor_summary <- summarize(group_by(labor, gender), \n                           avg_hours = mean(hours),\n                           paymentsum = sum(payment), \n                           medianage = median(age))\n\n##arrange\n#MUST SPECIFY GROUP_BY with by_group=TRUE\n#DEFAULT ascending order\n\nby_cyl <- mtcars %>% \n  group_by(cyl)\nby_cyl %>% \n  arrange(desc(wt), .by_group = TRUE)\n#########\n```\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}