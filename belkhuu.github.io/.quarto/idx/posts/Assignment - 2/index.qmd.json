{"title":"Assignment 2: Creating Plots","markdown":{"yaml":{"title":"Assignment 2: Creating Plots","author":"Bel Khuu","date":"2022-09-18","categories":["Code","R","Plots","Assignment"],"image":"Rplot.png","draft":false,"freeze":true,"format":{"html":{"code-fold":true,"code-tools":true}},"execute":{"echo":false}},"headingText":"1. Explore Paul Murrell's R examples","containsRefs":false,"markdown":"\n\n\nLet's start by exploring the murrell01.R script and learn how to create plots without using ggplot.\n\n```{r}\n#| fig-cap: \"Pressure (mm Hg) versus Temperature (Celsius)\"\n#| fig-subcap:\n#|   - \"Original: pch=16\"\n#|   - \"pch=5\"\n#|   - \"pch=10\"\n#|   - \"pch=15\"\n#| layout-ncol: 2\n#| layout-nrow: 2\n\nplot(pressure, pch=16) \ntext(150, 600, \n     \"Pressure (mm Hg)\\nversus\\nTemperature (Celsius)\")\n\nplot(pressure, pch=5)  \ntext(150, 600, \n     \"Pressure (mm Hg)\\nversus\\nTemperature (Celsius)\")\n\nplot(pressure, pch=10) \ntext(150, 600, \n     \"Pressure (mm Hg)\\nversus\\nTemperature (Celsius)\")\n\nplot(pressure, pch=15) \ntext(150, 600, \n     \"Pressure (mm Hg)\\nversus\\nTemperature (Celsius)\")\n```\n\nChanging the pch changes the point style on the plot.\n\n```{r}\n#| fig-cap: \"More Plots\" \n#| fig-subcap:\n#|   - \"Scatterplot\"\n#|   - \"Histogram\"\n#|   - \"Barplot\"\n#|   - \"Boxplot\"\n#|   - \"Persp\"\n#|   - \"Piechart\"\n#| layout-ncol: 2\n#| layout-nrow: 3\n#  Examples of standard high-level plots \n#  In each case, extra output is also added using low-level \n#  plotting functions.\n\n\n# Scatterplot\n# Note the incremental additions\n\nx <- c(0.5, 2, 4, 8, 12, 16)\ny1 <- c(1, 1.3, 1.9, 3.4, 3.9, 4.8)\ny2 <- c(4, .8, .5, .45, .4, .3)\n\n# Setting label orientation, margins c(bottom, left, top, right) & text size\npar(las=1, mar=c(4, 4, 2, 4), cex=.7) \nplot.new()\nplot.window(range(x), c(0, 6))\nlines(x, y1)\nlines(x, y2)\npoints(x, y1, pch=16, cex=2) # Try different cex value?  \npoints(x, y2, pch=21, bg=\"white\", cex=2)  # Different background color\npar(col=\"gray50\", fg=\"gray50\", col.axis=\"gray50\")\naxis(1, at=seq(0, 16, 4)) # What is the first number standing for?\naxis(2, at=seq(0, 6, 2))\naxis(4, at=seq(0, 6, 2))\nbox(bty=\"u\")\nmtext(\"Travel Time (s)\", side=1, line=2, cex=0.8)\nmtext(\"Responses per Travel\", side=2, line=2, las=0, cex=0.8)\nmtext(\"Responses per Second\", side=4, line=2, las=0, cex=0.8)\ntext(4, 5, \"Bird 131\")\npar(mar=c(5.1, 4.1, 4.1, 2.1), col=\"black\", fg=\"black\", col.axis=\"black\")\n\n# Histogram\n# Random data\nY <- rnorm(50)\n# Make sure no Y exceed [-3.5, 3.5]\nY[Y < -3.5 | Y > 3.5] <- NA # Selection/set range\nx <- seq(-3.5, 3.5, .1)\ndn <- dnorm(x)\npar(mar=c(4.5, 4.1, 3.1, 0))\nhist(Y, breaks=seq(-3.5, 3.5), ylim=c(0, 0.5), \n     col=\"gray80\", freq=FALSE)\nlines(x, dnorm(x), lwd=2)\npar(mar=c(5.1, 4.1, 4.1, 2.1))\n\n# Barplot\npar(mar=c(2, 3.1, 2, 2.1)) \nmidpts <- barplot(VADeaths, \n                  col=gray(0.1 + seq(1, 9, 2)/11), \n                  names=rep(\"\", 4))\nmtext(sub(\" \", \"\\n\", colnames(VADeaths)),\n      at=midpts, side=1, line=0.5, cex=0.5)\ntext(rep(midpts, each=5), apply(VADeaths, 2, cumsum) - VADeaths/2,\n     VADeaths, \n     col=rep(c(\"white\", \"black\"), times=3:2), \n     cex=0.8)\npar(mar=c(5.1, 4.1, 4.1, 2.1))  \n\n# Boxplot\npar(mar=c(3, 4.1, 2, 0))\nboxplot(len ~ dose, data = ToothGrowth,\n        boxwex = 0.25, at = 1:3 - 0.2,\n        subset= supp == \"VC\", col=\"white\",\n        xlab=\"\",\n        ylab=\"tooth length\", ylim=c(0,35))\nmtext(\"Vitamin C dose (mg)\", side=1, line=2.5, cex=0.8)\nboxplot(len ~ dose, data = ToothGrowth, add = TRUE,\n        boxwex = 0.25, at = 1:3 + 0.2,\n        \n        subset= supp == \"OJ\")\nlegend(1.5, 9, c(\"Ascorbic acid\", \"Orange juice\"), \n       fill = c(\"white\", \"gray\"), \n       bty=\"n\")\npar(mar=c(5.1, 4.1, 4.1, 2.1))\n\n# Persp\nx <- seq(-10, 10, length= 30)\ny <- x\nf <- function(x,y) { r <- sqrt(x^2+y^2); 10 * sin(r)/r }\nz <- outer(x, y, f)\nz[is.na(z)] <- 1\n# 0.5 to include z axis label\npar(mar=c(0, 0.5, 0, 0), lwd=0.5)\npersp(x, y, z, theta = 30, phi = 30, \n      expand = 0.5)\npar(mar=c(5.1, 4.1, 4.1, 2.1), lwd=1)\n\n# Piechart\npar(mar=c(0, 2, 1, 2), xpd=FALSE, cex=0.5)\npie.sales <- c(0.12, 0.3, 0.26, 0.16, 0.04, 0.12)\nnames(pie.sales) <- c(\"Blueberry\", \"Cherry\",\n                      \"Apple\", \"Boston Cream\", \"Other\", \"Vanilla\")\npie(pie.sales, col = gray(seq(0.3,1.0,length=6))) \n```\n\n## 2. Explore Happy Planet Index\n\n```{r}\n#| warning: false\n#| fig-cap: \"Plots from Happy Planet Index\" \n#| fig-subcap:\n#|   - \"Scatterplot\"\n#|   - \"Histogram\"\n#|   - \"Boxplot\"\n#|   - \"Pie Chart\"\n#| layout-ncol: 2\n\n\nlibrary(readr)\nlibrary(tidyverse)\nHPI <- read_csv(\"Book1.csv\")\nHPI <- as.data.frame(HPI)\n\n# see column names \n# colnames(HPI) \n\n# rename columns\nnames(HPI)<-c(\"country\", \"ISO\", \"year\", \"cont\", \"Pop\", \"LiExp\",\n              \"wellbeing\", \"EcoFP\", \"HPI\", \"BioCap\", \"GDP\")\n\nHPI_US <- as.data.frame(HPI)\nHPI_US <- HPI_US%>%\n    filter(HPI_US$ISO=='USA')\n\nHPI_KO <- as.data.frame(HPI)\nHPI_KO <- HPI_KO%>%\n  filter(HPI_KO$ISO=='KOR')\n\nlibrary(forecast)\nHPI_US_ts <- ts(HPI_US$HPI, frequency = 1, start = 2015) \nHPI_KO_ts <- ts(HPI_KO$HPI, frequency = 1, start = 2015)\n\n\n#Scatterplot\n#####\npar(las=1, mar=c(5, 5, 2, 5), cex=.7) \nplot.new()\nplot.window(range(HPI_US$year), range(HPI_US_ts))\nlines(HPI_US$year, HPI_US_ts)\npoints(HPI_US$year, HPI_US_ts, pch=16, cex=2)\npar(col=\"gray50\", fg=\"gray50\", col.axis=\"gray50\")\naxis(1, at=seq(2015, 2019, 1)) # Position, bottom\naxis(4, at=seq(37, 39, 0.5)) # Position, right\n\nmtext(\"Time (years)\", side=1, line=2.5, cex=0.8)\nmtext(\"Happy Planet Index (out of 100)\", side=4, line=3, las=0, cex=0.8)\n#####\n\n# Histogram\n\n#####\nHPI_19 <- as.data.frame(HPI)\nHPI_19 <- HPI_19%>%\n  filter(year==2019)\n\npar(las=1, mar=c(5, 2, 2, 5), cex=.7) \nplot.new()\nhist(HPI_19$LiExp, col=\"gray80\", freq=TRUE, \n     main=\" \", xlab =\" \", ylab = \" \", yaxt='n')\naxis(4, at=seq(0, 40, 10)) # Position, right\nmtext(\"Life Expectancy (years)\", side=1, line=2.5, cex=0.8)\nmtext(\"Distribution\", side=4, line=3, las=0, cex=0.8)\n#####\n\n# Boxplot\n\n#####\n\npar(las=1, mar=c(5, 5, 2, 3), cex=.7) \nplot.new()\n\nboxplot(HPI ~ GDP, data = HPI_19,\n        subset=cont, col=\"white\",\n        xlab=\"\",\n        ylab=\"\")\n\nmtext(\"GPD per capita grouped by continent\", side=1, line=2.5, cex=0.8)\nmtext(\"Happy Planet Index\", side=2, line=2.5,las=0, cex=0.8)\n\n#####\n\n# Pie Chart\n#####\n\nHPI_19s <- HPI_19%>%\n  filter()%>%\n  select(cont, GDP, HPI, LiExp)\n\nHPI_19s$LiExp.col <- HPI_19s$LiExp\nHPI_19s$LiExp.col[HPI_19s$LiExp.col <= 65] <- 3\nHPI_19s$LiExp.col[HPI_19s$LiExp.col > 65 & HPI_19s$LiExp.col <= 75] <- 2\nHPI_19s$LiExp.col[HPI_19s$LiExp.col > 75] <- 1\n\nHPI_19s <- HPI_19s%>%\n  arrange(LiExp.col)%>%\n  count(LiExp.col)\n\nHPI_19s$LiExp.col[HPI_19s$LiExp.col == 3] <- \"Poor Life Expectancy\"\nHPI_19s$LiExp.col[HPI_19s$LiExp.col == 2] <- \"Average Life Expectancy\"\nHPI_19s$LiExp.col[HPI_19s$LiExp.col == 1] <- \"Good Life Expectancy\"\n\npar(mar=c(2, 2, 1, 2), xpd=FALSE, cex=0.5)\npie(HPI_19s$n, HPI_19s$LiExp.col, col = gray(seq(0.3,1.0,length=3))) \nmtext(\"Life Expectancy in 2019\", side=1, line=-3, cex=0.8)\n#####\n```\n\n## 3. The future of Data Analysis - Edward Tufte\n\nWe are exposed to a an incredibly large amount of information by finding our way using applications like Google maps. I didn't notice that there were 900+ words on the map! Our eyes can see a lot content and colors. Small changes like ghosting a player can make storytelling more efficient.\n\nGain a taste for excellent and thrive for it. Ask ourselves how things are done.\n\nHave an open mind but not an empty head: be ready to learn new things without giving up past knowledge.\n\nJohn W. Tukey: We assume that models can't be useful because they oversimplify. However, ofter, they are. Do we even know what is useful anymore?\n\nMost public studies are false? We are trying to tell the truth. So why? Have we been overfitting our models? are the new tools to gather new data that is not accounted for? \"If you torture the data long enough, it will tell you anything you want\" is a powerful quote. It highlights the overfitting problem. Replication prices is more expensive. Then, how can we understand what has been done in the past and adjust it to future data?\n\nElectronic records did not improve mortality rate. What we really need is to use the new method to make necessary change, \"to learn the truth\" according to Tufte.\n\nConfirmatory Unhacked VS Exploratory Detective Work Tufte considered this, the future of data analysis with the example of FDA. It required better research designs because the data will have to be specified in advance.\n\nThe importance of Data Forensics = Give your data a health check. - People can't keep their own score\n\nThe Thinking eye - Ask \"How do you know?\" - Are there any bias? - Look at the world and not it's representation - What we see may not contain the answer\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":false,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":true,"code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"index.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.1.189","editor":"visual","theme":"spacelab","title-block-banner":true,"title":"Assignment 2: Creating Plots","author":"Bel Khuu","date":"2022-09-18","categories":["Code","R","Plots","Assignment"],"image":"Rplot.png","draft":false},"extensions":{"book":{"multiFile":true}}}}}